/* Path: src/components/organisms/DataGrid/DataGrid.module.css */
/* ═══════════════════════════════════════════════════════════════════════════════
   FING DESIGN SYSTEM - DataGrid Component

   Advanced data table with sorting, filtering, pagination, and virtualization
   Optimized for financial/analytical data display
   ═══════════════════════════════════════════════════════════════════════════════ */

/* ─────────────────────────────────────────────────────────────────────────────
   WRAPPER
   ───────────────────────────────────────────────────────────────────────────── */

.dataGrid {
  width: 100%;
  display: flex;
  flex-direction: column;
  gap: var(--fing-space-4);
  background-color: var(--fing-bg-elevated);
  border: 1px solid var(--fing-border-default);
  border-radius: var(--fing-radius-lg);
  overflow: hidden;
}

.dataGridBordered {
  /* Additional border styling if needed */
}

.dataGridCompact {
  /* Compact mode adjustments */
}

/* ─────────────────────────────────────────────────────────────────────────────
   TOOLBAR
   ───────────────────────────────────────────────────────────────────────────── */

.toolbar {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: var(--fing-space-4);
  padding: var(--fing-space-4);
  border-bottom: 1px solid var(--fing-border-subtle);
  background-color: var(--fing-bg-overlay);
}

.exportButton {
  display: inline-flex;
  align-items: center;
  gap: var(--fing-space-2);
  padding: var(--fing-space-2) var(--fing-space-4);
  background-color: transparent;
  border: 1px solid var(--fing-border-default);
  border-radius: var(--fing-radius-md);
  color: var(--fing-text-secondary);
  font-family: var(--fing-font-primary);
  font-size: var(--fing-text-sm);
  font-weight: var(--fing-font-medium);
  cursor: pointer;
  transition: var(--fing-transition-fast);
  white-space: nowrap;
}

.exportButton:hover {
  border-color: var(--fing-accent-primary);
  color: var(--fing-accent-primary);
  background-color: var(--fing-accent-subtle);
}

.exportButton:focus-visible {
  outline: 2px solid var(--fing-accent-primary);
  outline-offset: 2px;
}

/* ─────────────────────────────────────────────────────────────────────────────
   FILTERS
   ───────────────────────────────────────────────────────────────────────────── */

.filtersContainer {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: var(--fing-space-3);
}

.filtersHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--fing-space-3);
}

.filtersTitle {
  display: flex;
  align-items: center;
  gap: var(--fing-space-2);
  color: var(--fing-text-secondary);
  font-size: var(--fing-text-sm);
  font-weight: var(--fing-font-medium);
}

.filtersClearAll {
  background: none;
  border: none;
  color: var(--fing-accent-primary);
  font-family: var(--fing-font-primary);
  font-size: var(--fing-text-sm);
  cursor: pointer;
  transition: var(--fing-transition-fast);
}

.filtersClearAll:hover {
  text-decoration: underline;
}

.filtersGrid {
  display: flex;
  flex-wrap: wrap;
  gap: var(--fing-space-2);
}

.filterControl {
  position: relative;
}

.filterButton {
  display: inline-flex;
  align-items: center;
  gap: var(--fing-space-1-5);
  padding: var(--fing-space-1-5) var(--fing-space-3);
  background-color: var(--fing-bg-subtle);
  border: 1px solid var(--fing-border-subtle);
  border-radius: var(--fing-radius-md);
  color: var(--fing-text-secondary);
  font-family: var(--fing-font-primary);
  font-size: var(--fing-text-xs);
  font-weight: var(--fing-font-medium);
  cursor: pointer;
  transition: var(--fing-transition-fast);
}

.filterButton:hover {
  border-color: var(--fing-border-default);
  background-color: var(--fing-bg-interactive);
}

.filterButtonActive {
  border-color: var(--fing-accent-primary);
  background-color: var(--fing-accent-subtle);
  color: var(--fing-accent-primary);
}

.filterButtonLabel {
  max-width: 120px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.filterButtonClear {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 2px;
  margin-left: var(--fing-space-1);
  border-radius: var(--fing-radius-sm);
  transition: var(--fing-transition-fast);
}

.filterButtonClear:hover {
  background-color: var(--fing-status-negative-subtle);
  color: var(--fing-status-negative);
}

.filterButtonChevron {
  transition: transform var(--fing-duration-fast) var(--fing-ease-default);
}

.filterButtonChevronOpen {
  transform: rotate(180deg);
}

.filterDropdown {
  position: absolute;
  top: 100%;
  left: 0;
  z-index: var(--fing-z-dropdown);
  min-width: 200px;
  margin-top: var(--fing-space-1);
  padding: var(--fing-space-3);
  background-color: var(--fing-bg-overlay);
  border: 1px solid var(--fing-border-default);
  border-radius: var(--fing-radius-md);
  box-shadow: var(--fing-shadow-dropdown);
  animation: fing-emerge var(--fing-duration-fast) var(--fing-ease-out);
}

.filterInputWrapper {
  position: relative;
  display: flex;
  align-items: center;
}

.filterInputIcon {
  position: absolute;
  left: var(--fing-space-3);
  color: var(--fing-text-tertiary);
  pointer-events: none;
}

.filterInput {
  width: 100%;
  padding: var(--fing-space-2) var(--fing-space-3);
  padding-left: var(--fing-space-8);
  background-color: var(--fing-bg-subtle);
  border: 1px solid var(--fing-border-subtle);
  border-radius: var(--fing-radius-sm);
  color: var(--fing-text-primary);
  font-family: var(--fing-font-led);
  font-size: var(--fing-text-sm);
  letter-spacing: var(--fing-tracking-led);
  transition: var(--fing-transition-fast);
}

.filterInput:focus {
  outline: none;
  border-color: var(--fing-accent-primary);
  background-color: var(--fing-bg-base);
}

.filterInput::placeholder {
  color: var(--fing-text-tertiary);
}

.filterSelect {
  width: 100%;
  padding: var(--fing-space-2) var(--fing-space-3);
  background-color: var(--fing-bg-subtle);
  border: 1px solid var(--fing-border-subtle);
  border-radius: var(--fing-radius-sm);
  color: var(--fing-text-primary);
  font-family: var(--fing-font-primary);
  font-size: var(--fing-text-sm);
  cursor: pointer;
  transition: var(--fing-transition-fast);
}

.filterSelect:focus {
  outline: none;
  border-color: var(--fing-accent-primary);
}

.filterRangeInputs {
  display: flex;
  align-items: center;
  gap: var(--fing-space-2);
}

.filterRangeInputs .filterInput {
  padding-left: var(--fing-space-3);
}

.filterRangeSeparator {
  color: var(--fing-text-tertiary);
}

/* ─────────────────────────────────────────────────────────────────────────────
   TABLE CONTAINER
   ───────────────────────────────────────────────────────────────────────────── */

.tableContainer {
  position: relative;
  overflow: auto;
  scrollbar-width: thin;
  scrollbar-color: var(--fing-bg-interactive) var(--fing-bg-elevated);
}

.tableContainer::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

.tableContainer::-webkit-scrollbar-track {
  background: var(--fing-bg-elevated);
}

.tableContainer::-webkit-scrollbar-thumb {
  background-color: var(--fing-bg-interactive);
  border-radius: var(--fing-radius-full);
}

.tableContainer::-webkit-scrollbar-thumb:hover {
  background-color: var(--fing-border-strong);
}

/* ─────────────────────────────────────────────────────────────────────────────
   TABLE
   ───────────────────────────────────────────────────────────────────────────── */

.table {
  --table-row-height: 44px;
  width: 100%;
  border-collapse: collapse;
  font-family: var(--fing-font-led);
  font-size: var(--fing-text-sm);
  letter-spacing: var(--fing-tracking-led);
  background-color: var(--fing-bg-elevated);
}

.dataGridCompact .table {
  --table-row-height: 36px;
}

/* ─────────────────────────────────────────────────────────────────────────────
   HEADER
   ───────────────────────────────────────────────────────────────────────────── */

.thead {
  background-color: var(--fing-bg-overlay);
}

.theadSticky {
  position: sticky;
  top: 0;
  z-index: var(--fing-z-sticky);
  background-color: var(--fing-bg-overlay);
}

.headerRow {
  border-bottom: 1px solid var(--fing-border-default);
}

.th {
  position: relative;
  padding: var(--fing-space-3) var(--fing-space-4);
  height: var(--table-row-height);
  text-align: left;
  font-family: var(--fing-font-primary);
  font-weight: var(--fing-font-semibold);
  font-size: var(--fing-text-xs);
  color: var(--fing-text-secondary);
  letter-spacing: 0.03em;
  text-transform: uppercase;
  white-space: nowrap;
  background-color: var(--fing-bg-overlay);
  user-select: none;
}

.thCheckbox,
.thExpand {
  width: 44px;
  padding: var(--fing-space-2);
  text-align: center;
}

.thSortable {
  cursor: pointer;
  transition: var(--fing-transition-fast);
}

.thSortable:hover {
  color: var(--fing-text-primary);
  background-color: var(--fing-bg-subtle);
}

.thSorted {
  color: var(--fing-accent-primary);
}

.thSticky {
  position: sticky;
  z-index: calc(var(--fing-z-sticky) + 1);
  background-color: var(--fing-bg-overlay);
}

.thContent {
  display: flex;
  align-items: center;
  gap: var(--fing-space-2);
}

.thLabel {
  flex: 1;
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
}

.sortIcon {
  display: inline-flex;
  align-items: center;
  flex-shrink: 0;
}

.sortIconInactive {
  opacity: 0.4;
}

.sortIconActive {
  color: var(--fing-accent-primary);
}

/* ─────────────────────────────────────────────────────────────────────────────
   RESIZE HANDLE
   ───────────────────────────────────────────────────────────────────────────── */

.resizeHandle {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  width: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: col-resize;
  color: var(--fing-text-tertiary);
  opacity: 0;
  transition: var(--fing-transition-fast);
}

.th:hover .resizeHandle {
  opacity: 1;
}

.resizeHandle:hover {
  color: var(--fing-accent-primary);
  background-color: var(--fing-accent-subtle);
}

/* ─────────────────────────────────────────────────────────────────────────────
   BODY
   ───────────────────────────────────────────────────────────────────────────── */

.tbody {
  background-color: var(--fing-bg-elevated);
}

/* ─────────────────────────────────────────────────────────────────────────────
   ROW
   ───────────────────────────────────────────────────────────────────────────── */

.tr {
  background-color: var(--fing-bg-elevated);
  border-bottom: 1px solid var(--fing-border-subtle);
  transition: background-color var(--fing-duration-fast) var(--fing-ease-default);
}

.tr:last-child {
  border-bottom: none;
}

.trHoverable:hover {
  background-color: var(--fing-bg-overlay);
}

.trSelected {
  background-color: var(--fing-accent-subtle);
}

.trSelected:hover {
  background-color: var(--fing-accent-subtle);
}

.trClickable {
  cursor: pointer;
}

.trClickable:focus {
  outline: none;
}

.trClickable:focus-visible {
  outline: 2px solid var(--fing-accent-primary);
  outline-offset: -2px;
}

.trStriped {
  background-color: var(--fing-bg-overlay);
}

.trCompact {
  /* Compact row adjustments handled by CSS variable */
}

/* ─────────────────────────────────────────────────────────────────────────────
   CELL
   ───────────────────────────────────────────────────────────────────────────── */

.td {
  padding: var(--fing-space-3) var(--fing-space-4);
  height: var(--table-row-height);
  font-size: var(--fing-text-sm);
  font-weight: var(--fing-font-regular);
  color: var(--fing-text-primary);
  font-family: var(--fing-font-led);
  letter-spacing: var(--fing-tracking-led);
  text-align: left;
  vertical-align: middle;
}

.tdCheckbox,
.tdExpand {
  width: 44px;
  padding: var(--fing-space-2);
  text-align: center;
}

.tdSticky {
  position: sticky;
  z-index: 1;
  background-color: inherit;
}

.tdEllipsis {
  max-width: 200px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.alignLeft {
  text-align: left;
}

.alignCenter {
  text-align: center;
}

.alignRight {
  text-align: right;
}

/* ─────────────────────────────────────────────────────────────────────────────
   EXPAND BUTTON
   ───────────────────────────────────────────────────────────────────────────── */

.expandButton {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  padding: 0;
  background: none;
  border: none;
  border-radius: var(--fing-radius-sm);
  color: var(--fing-text-tertiary);
  cursor: pointer;
  transition: var(--fing-transition-fast);
}

.expandButton:hover {
  color: var(--fing-accent-primary);
  background-color: var(--fing-accent-subtle);
}

.expandButton:focus-visible {
  outline: 2px solid var(--fing-accent-primary);
  outline-offset: 2px;
}

/* ─────────────────────────────────────────────────────────────────────────────
   EXPANDED ROW
   ───────────────────────────────────────────────────────────────────────────── */

.expandedRow {
  background-color: var(--fing-bg-overlay);
}

.expandedCell {
  padding: var(--fing-space-4) var(--fing-space-6);
  border-left: 3px solid var(--fing-accent-primary);
  animation: fing-emerge var(--fing-duration-normal) var(--fing-ease-out);
}

/* ─────────────────────────────────────────────────────────────────────────────
   FOOTER
   ───────────────────────────────────────────────────────────────────────────── */

.tfoot {
  background-color: var(--fing-bg-overlay);
  border-top: 1px solid var(--fing-border-default);
}

.footerRow {
  /* Footer row styling */
}

.tf {
  padding: var(--fing-space-3) var(--fing-space-4);
  height: var(--table-row-height);
  font-family: var(--fing-font-led);
  font-size: var(--fing-text-sm);
  font-weight: var(--fing-font-semibold);
  letter-spacing: var(--fing-tracking-led);
  color: var(--fing-text-primary);
  text-align: left;
  vertical-align: middle;
}

.tfEmpty {
  /* Empty footer cell for checkbox/expand columns */
}

.tfSticky {
  position: sticky;
  z-index: 1;
  background-color: var(--fing-bg-overlay);
}

/* ─────────────────────────────────────────────────────────────────────────────
   PAGINATION
   ───────────────────────────────────────────────────────────────────────────── */

.pagination {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--fing-space-4);
  padding: var(--fing-space-4);
  border-top: 1px solid var(--fing-border-subtle);
  background-color: var(--fing-bg-overlay);
  flex-wrap: wrap;
}

.paginationInfo {
  display: flex;
  align-items: center;
  gap: var(--fing-space-2);
}

.paginationText {
  color: var(--fing-text-secondary);
  font-family: var(--fing-font-primary);
  font-size: var(--fing-text-sm);
}

.paginationPageSize {
  display: flex;
  align-items: center;
  gap: var(--fing-space-2);
}

.paginationLabel {
  color: var(--fing-text-secondary);
  font-family: var(--fing-font-primary);
  font-size: var(--fing-text-sm);
}

.paginationSelect {
  padding: var(--fing-space-1-5) var(--fing-space-3);
  background-color: var(--fing-bg-subtle);
  border: 1px solid var(--fing-border-subtle);
  border-radius: var(--fing-radius-sm);
  color: var(--fing-text-primary);
  font-family: var(--fing-font-led);
  font-size: var(--fing-text-sm);
  letter-spacing: var(--fing-tracking-led);
  cursor: pointer;
  transition: var(--fing-transition-fast);
}

.paginationSelect:hover {
  border-color: var(--fing-border-default);
}

.paginationSelect:focus {
  outline: none;
  border-color: var(--fing-accent-primary);
}

.paginationNav {
  display: flex;
  align-items: center;
  gap: var(--fing-space-1);
}

.paginationButton {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  padding: 0;
  background-color: transparent;
  border: 1px solid var(--fing-border-subtle);
  border-radius: var(--fing-radius-sm);
  color: var(--fing-text-secondary);
  cursor: pointer;
  transition: var(--fing-transition-fast);
}

.paginationButton:hover:not(:disabled) {
  border-color: var(--fing-accent-primary);
  color: var(--fing-accent-primary);
  background-color: var(--fing-accent-subtle);
}

.paginationButton:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

.paginationButton:focus-visible {
  outline: 2px solid var(--fing-accent-primary);
  outline-offset: 2px;
}

.paginationPages {
  display: flex;
  align-items: center;
  gap: var(--fing-space-1);
  margin: 0 var(--fing-space-2);
}

.paginationPageButton {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 32px;
  height: 32px;
  padding: 0 var(--fing-space-2);
  background-color: transparent;
  border: 1px solid transparent;
  border-radius: var(--fing-radius-sm);
  color: var(--fing-text-secondary);
  font-family: var(--fing-font-led);
  font-size: var(--fing-text-sm);
  letter-spacing: var(--fing-tracking-led);
  cursor: pointer;
  transition: var(--fing-transition-fast);
}

.paginationPageButton:hover {
  border-color: var(--fing-border-subtle);
  background-color: var(--fing-bg-subtle);
}

.paginationPageButtonActive {
  border-color: var(--fing-accent-primary);
  background-color: var(--fing-accent-subtle);
  color: var(--fing-accent-primary);
  font-weight: var(--fing-font-semibold);
}

.paginationEllipsis {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 32px;
  height: 32px;
  color: var(--fing-text-tertiary);
  font-family: var(--fing-font-led);
  letter-spacing: var(--fing-tracking-led);
}

/* ─────────────────────────────────────────────────────────────────────────────
   EMPTY STATE
   ───────────────────────────────────────────────────────────────────────────── */

.emptyCell {
  padding: 0;
}

.emptyState {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: var(--fing-space-12) var(--fing-space-6);
  text-align: center;
}

.emptyIcon {
  margin-bottom: var(--fing-space-4);
  color: var(--fing-text-tertiary);
}

.emptyIconError {
  color: var(--fing-status-negative);
}

.emptyTitle {
  margin: 0 0 var(--fing-space-2);
  font-family: var(--fing-font-primary);
  font-size: var(--fing-text-lg);
  font-weight: var(--fing-font-semibold);
  color: var(--fing-text-primary);
}

.emptyDescription {
  margin: 0 0 var(--fing-space-4);
  font-family: var(--fing-font-primary);
  font-size: var(--fing-text-sm);
  color: var(--fing-text-secondary);
  max-width: 320px;
}

.emptyAction {
  margin-top: var(--fing-space-2);
}

.clearFiltersButton {
  padding: var(--fing-space-2) var(--fing-space-4);
  background-color: var(--fing-accent-subtle);
  border: 1px solid var(--fing-accent-primary);
  border-radius: var(--fing-radius-md);
  color: var(--fing-accent-primary);
  font-family: var(--fing-font-primary);
  font-size: var(--fing-text-sm);
  font-weight: var(--fing-font-medium);
  cursor: pointer;
  transition: var(--fing-transition-fast);
}

.clearFiltersButton:hover {
  background-color: var(--fing-accent-primary);
  color: var(--fing-text-inverse);
}

/* ─────────────────────────────────────────────────────────────────────────────
   LOADING STATES
   ───────────────────────────────────────────────────────────────────────────── */

.loadingContainer {
  padding: var(--fing-space-4);
}

.loadingHeader {
  display: flex;
  gap: var(--fing-space-4);
  padding: var(--fing-space-3) var(--fing-space-4);
  background-color: var(--fing-bg-overlay);
  border-bottom: 1px solid var(--fing-border-subtle);
}

.loadingBody {
  display: flex;
  flex-direction: column;
}

.loadingRow {
  display: flex;
  gap: var(--fing-space-4);
  padding: var(--fing-space-3) var(--fing-space-4);
  border-bottom: 1px solid var(--fing-border-subtle);
}

.loadingRow:last-child {
  border-bottom: none;
}

.loadingCell {
  flex: 1;
  min-width: 80px;
}

.loadingSkeleton {
  height: 16px;
  background: linear-gradient(
    90deg,
    var(--fing-bg-subtle) 0%,
    var(--fing-bg-interactive) 50%,
    var(--fing-bg-subtle) 100%
  );
  background-size: 200% 100%;
  border-radius: var(--fing-radius-sm);
  animation: fing-shimmer 1.5s ease-in-out infinite;
}

.loadingOverlay {
  position: absolute;
  inset: 0;
  z-index: var(--fing-z-overlay);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: var(--fing-space-3);
  background-color: var(--fing-bg-glass);
  backdrop-filter: blur(2px);
}

.loadingSpinner {
  width: 32px;
  height: 32px;
  border: 3px solid var(--fing-border-subtle);
  border-top-color: var(--fing-accent-primary);
  border-radius: 50%;
  animation: fing-rotate-slow 0.8s linear infinite;
}

.loadingMessage {
  color: var(--fing-text-secondary);
  font-family: var(--fing-font-primary);
  font-size: var(--fing-text-sm);
}

/* ─────────────────────────────────────────────────────────────────────────────
   REDUCED MOTION
   ───────────────────────────────────────────────────────────────────────────── */

@media (prefers-reduced-motion: reduce) {
  .loadingSkeleton,
  .loadingSpinner {
    animation: none;
  }

  .loadingSkeleton {
    background: var(--fing-bg-subtle);
  }

  .expandedCell,
  .filterDropdown {
    animation: none;
  }

  .th,
  .tr,
  .td,
  .filterButton,
  .paginationButton,
  .exportButton {
    transition: none;
  }
}

/* ─────────────────────────────────────────────────────────────────────────────
   RESPONSIVE
   ───────────────────────────────────────────────────────────────────────────── */

@media (max-width: 768px) {
  .toolbar {
    flex-direction: column;
    align-items: stretch;
  }

  .pagination {
    flex-direction: column;
    gap: var(--fing-space-3);
  }

  .paginationNav {
    order: -1;
  }

  .filtersGrid {
    flex-direction: column;
  }

  .filterDropdown {
    left: 0;
    right: 0;
    min-width: auto;
  }
}
